<div >
  <!-- Header -->
  <header class="mb-10 animate-slide-down">
    <div class="flex justify-between items-start mb-6 ">
      <div>
      <app-breadcrumbs [items]="breadcrumbs"></app-breadcrumbs>

        <h1 class="font-['Outfit'] text-[42px] font-semibold text-emerald-900 mt-6">Dish Library</h1>
        <p class="text-gray-500 mt-6 ">Manage your meal collection with versioning and compliance tracking</p>
      </div>
      <button 
      routerLink="/create-dish"
        (click)="onCreateNewDish()"
        class="px-6 py-3 bg-gradient-to-br from-emerald-500 to-emerald-600 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 flex items-center gap-2">
        <i class="fas fa-plus"></i>
        Create New Dish
      </button>
    </div>
  </header>

  <!-- Filter Section -->
  <div class="bg-white p-6 rounded-2xl shadow-sm mb-8 animate-[fadeInUp_0.6s_cubic-bezier(0.16,1,0.3,1)_0.2s_both]">
   <div class="grid gap-4 items-end
            grid-cols-1 sm:grid-cols-2 md:grid-cols-[2fr_1fr_1fr_1fr_auto]">
  
  <!-- Search -->
  <div class="flex flex-col gap-2 w-full">
    <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Search</label>
    <div class="relative">
      <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
      <input 
        type="text" 
        [(ngModel)]="searchQuery"
        placeholder="Search dishes by name, ingredients, or tags..."
        class="w-full pl-12 pr-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:outline-none focus:ring-4 focus:ring-emerald-50 transition-all">
    </div>
  </div>

  <!-- Meal Type -->
  <div class="flex flex-col gap-2 w-full">
    <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Meal Type</label>
    <select 
      [(ngModel)]="selectedMealType"
      class="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:outline-none focus:ring-4 focus:ring-emerald-50 transition-all bg-white cursor-pointer">
      <option value="all">All Types</option>
      <option value="breakfast">Breakfast</option>
      <option value="lunch">Lunch</option>
      <option value="dinner">Dinner</option>
      <option value="snack">Snack</option>
    </select>
  </div>

  <!-- Class -->
  <div class="flex flex-col gap-2 w-full">
    <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Class</label>
    <select 
      [(ngModel)]="selectedClass"
      class="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:outline-none focus:ring-4 focus:ring-emerald-50 transition-all bg-white cursor-pointer">
      <option value="all">All Classes</option>
      <option value="economy">Economy</option>
      <option value="business">Business</option>
      <option value="first">First</option>
    </select>
  </div>

  <!-- Dietary -->
  <div class="flex flex-col gap-2 w-full">
    <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Dietary</label>
    <select 
      [(ngModel)]="selectedDietary"
      class="w-full px-4 py-3.5 border-2 border-gray-200 rounded-xl focus:border-emerald-500 focus:outline-none focus:ring-4 focus:ring-emerald-50 transition-all bg-white cursor-pointer">
      <option value="all">All Tags</option>
      <option value="vegetarian">Vegetarian</option>
      <option value="vegan">Vegan</option>
      <option value="gluten-free">Gluten Free</option>
      <option value="dairy-free">Dairy Free</option>
      <option value="halal">Halal</option>
    </select>
  </div>

  <!-- Filter Button -->
  <div class="flex justify-start md:justify-end w-full">
    <button 
      (click)="onFilter()"
      class="px-5 py-3.5 bg-emerald-50 text-emerald-900 rounded-xl font-semibold hover:bg-emerald-100 transition-all duration-300 hover:-translate-y-0.5 w-full md:w-auto">
      <i class="fas fa-filter"></i>
    </button>
  </div>
</div>

  </div>

  <!-- Dish Grid -->
  <div class="grid grid-cols-[repeat(auto-fill,minmax(340px,1fr))] gap-6 animate-[fadeIn_0.8s_cubic-bezier(0.16,1,0.3,1)_0.4s_both]">
    <div 
      *ngFor="let dish of dishes; let i = index"
      class="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all duration-300 hover:-translate-y-2 cursor-pointer animate-[fadeInUp_0.6s_cubic-bezier(0.16,1,0.3,1)_both]"
      [style.animation-delay]="(0.5 + i * 0.1) + 's'">
      
      <!-- Dish Image -->
      <div class="w-full h-[220px] bg-gradient-to-br from-emerald-50 to-emerald-100 flex items-center justify-center text-6xl text-emerald-600 relative overflow-hidden">
        <div class="absolute top-0 right-0 w-full h-full opacity-30"
             style="background: radial-gradient(circle at top right, rgba(255,255,255,0.8) 0%, transparent 70%);">
        </div>
        <i [class]="dish.icon + ' relative z-10'"></i>
      </div>

      <!-- Dish Content -->
      <div class="p-6">
        <!-- Header -->
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="font-['Outfit'] text-xl font-semibold text-emerald-900 mb-2">{{ dish.name }}</h3>
            <div class="flex flex-col gap-1 text-xs text-gray-500">
              <span>üçΩÔ∏è {{ dish.class }}</span>
              <span>‚úàÔ∏è {{ dish.route }}</span>
            </div>
          </div>
          <div class="inline-flex items-center gap-1.5 px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-semibold">
            <i class="fas fa-code-branch"></i>
            {{ dish.version }}
          </div>
        </div>

        <!-- Tags -->
        <div class="flex flex-wrap gap-2 mb-4">
          <span 
            *ngFor="let tag of dish.tags"
            [class]="'px-3 py-1.5 rounded-lg text-xs font-semibold ' + getTagClass(tag.type)">
            {{ tag.label }}
          </span>
        </div>

        <!-- Info Grid -->
        <div class="grid grid-cols-3 gap-3 pt-4 border-t border-gray-100">
          <div class="flex flex-col gap-1">
            <div class="text-[11px] uppercase tracking-wide text-gray-500 font-semibold">Batches</div>
            <div class="text-sm font-semibold text-gray-800">{{ dish.batches }}</div>
          </div>
          <div class="flex flex-col gap-1">
            <div class="text-[11px] uppercase tracking-wide text-gray-500 font-semibold">Labels</div>
            <div class="text-sm font-semibold text-gray-800">{{ dish.labels | number }}</div>
          </div>
          <div class="flex flex-col gap-1">
            <div class="text-[11px] uppercase tracking-wide text-gray-500 font-semibold">Updated</div>
            <div class="text-sm font-semibold text-gray-800">{{ dish.updated }}</div>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex gap-2 mt-4">
          <button 
            (click)="onEditDish(dish)"
            class="w-9 h-9 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center hover:bg-emerald-600 hover:text-white transition-all duration-300 hover:scale-110"
            title="Edit">
            <i class="fas fa-edit"></i>
          </button>
          <button 
            (click)="onViewHistory(dish)"
            class="w-9 h-9 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center hover:bg-emerald-600 hover:text-white transition-all duration-300 hover:scale-110"
            title="Version History">
            <i class="fas fa-history"></i>
          </button>
          <button 
            (click)="onPrintLabels(dish)"
            class="w-9 h-9 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center hover:bg-emerald-600 hover:text-white transition-all duration-300 hover:scale-110"
            title="Print Labels">
            <i class="fas fa-print"></i>
          </button>
          <button 
            (click)="onShowQRCode(dish)"
            class="w-9 h-9 rounded-lg bg-emerald-50 text-emerald-600 flex items-center justify-center hover:bg-emerald-600 hover:text-white transition-all duration-300 hover:scale-110"
            title="QR Code">
            <i class="fas fa-qrcode"></i>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State (Show when no dishes) -->
  <div *ngIf="dishes.length === 0" class="text-center py-20 bg-white rounded-2xl animate-[fadeInUp_0.6s_cubic-bezier(0.16,1,0.3,1)_0.5s_both]">
    <div class="text-8xl text-emerald-100 mb-6">
      <i class="fas fa-utensils"></i>
    </div>
    <h2 class="font-['Outfit'] text-2xl font-semibold text-emerald-900 mb-3">No Dishes Found</h2>
    <p class="text-gray-500 mb-8">Try adjusting your filters or create a new dish to get started</p>
    <button 
      (click)="onCreateNewDish()"
      class="px-6 py-3 bg-gradient-to-br from-emerald-500 to-emerald-600 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transition-all duration-300 hover:-translate-y-0.5 inline-flex items-center gap-2">
      <i class="fas fa-plus"></i>
      Create Your First Dish
    </button>
  </div>
</div>
