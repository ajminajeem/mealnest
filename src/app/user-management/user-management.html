<div>
  <!-- Header -->
  <div
    class="flex justify-between items-center mb-10 animate-[slideDown_0.6s_cubic-bezier(0.16,1,0.3,1)]"
  >
    <div class="flex-1">
      <div class="flex items-center gap-2 text-sm text-gray-500 mb-4">
        <a href="#" class="text-emerald-600 hover:text-green-700 transition-colors">Dashboard</a>
        <i class="fas fa-chevron-right text-xs"></i>
        <span>User Management</span>
      </div>
      <h1 class="text-3xl md:text-4xl lg:text-4xl font-semibold text-primary mb-2">
        User Management
      </h1>
      <p class="text-base text-gray-500">
        Manage users, roles, and permissions across your organization
      </p>
    </div>
    <button
      (click)="addNewUser()"
      class="px-6 py-3.5 bg-gradient-to-br from-emerald-500 to-green-600 text-white rounded-xl font-semibold text-sm shadow-md hover:shadow-lg hover:-translate-y-0.5 transition-all duration-300 flex items-center gap-2"
    >
      <i class="fas fa-user-plus"></i>
      Add New User
    </button>
  </div>

  <!-- Filter Bar -->
  <div
    class="bg-white p-6 rounded-2xl shadow-sm mb-6 flex gap-4 items-center animate-[fadeInUp_0.6s_cubic-bezier(0.16,1,0.3,1)_0.2s_both]"
  >
    <div class="flex-1 relative">
      <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchChange()"
        placeholder="Search users by name or email..."
        class="w-full pl-11 pr-4 py-3.5 border-2 border-gray-200 rounded-xl text-sm focus:outline-none focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all"
      />
    </div>
    <select
      (change)="onSiteChange($event)"
      class="px-4 py-3.5 border-2 border-gray-200 rounded-xl text-sm bg-white cursor-pointer focus:outline-none focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all"
    >
      <option *ngFor="let site of sites" [value]="site === 'All Sites' ? 'all' : site">
        {{ site }}
      </option>
    </select>
    <select
      (change)="onRoleChange($event)"
      class="px-4 py-3.5 border-2 border-gray-200 rounded-xl text-sm bg-white cursor-pointer focus:outline-none focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all"
    >
      <option *ngFor="let role of roles" [value]="role === 'All Roles' ? 'all' : role">
        {{ role }}
      </option>
    </select>
    <select
      (change)="onStatusChange($event)"
      class="px-4 py-3.5 border-2 border-gray-200 rounded-xl text-sm bg-white cursor-pointer focus:outline-none focus:border-emerald-500 focus:ring-4 focus:ring-emerald-100 transition-all"
    >
      <option *ngFor="let status of statuses" [value]="status === 'All Status' ? 'all' : status">
        {{ status }}
      </option>
    </select>
  </div>

  <!-- Users Table -->
  <div
    class="bg-white rounded-2xl shadow-sm overflow-hidden animate-[fadeInUp_0.6s_cubic-bezier(0.16,1,0.3,1)_0.4s_both]"
  >
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-50 border-b-2 border-gray-200">
          <tr>
            <th
              class="px-6 py-5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"
            >
              User
            </th>
            <th
              class="px-6 py-5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"
            >
              Role
            </th>
            <th
              class="px-6 py-5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"
            >
              Site
            </th>
            <th
              class="px-6 py-5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"
            >
              Status
            </th>
            <th
              class="px-6 py-5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"
            >
              Last Active
            </th>
            <th
              class="px-6 py-5 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider"
            >
              Actions
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let user of filteredUsers"
            class="border-b border-gray-200 hover:bg-emerald-50 transition-all duration-200"
          >
            <td class="px-6 py-5">
              <div class="flex items-center gap-3.5">
                <div
                  class="w-11 h-11 rounded-lg bg-gradient-to-br from-emerald-500 to-green-600 flex items-center justify-center text-white font-semibold text-base flex-shrink-0"
                >
                  {{ user.initials }}
                </div>
                <div class="flex-1">
                  <div class="font-semibold text-gray-800 mb-1">{{ user.name }}</div>
                  <div class="text-xs text-gray-500">{{ user.email }}</div>
                </div>
              </div>
            </td>
            <td class="px-6 py-5">
              <span [ngClass]="getRoleBadgeClass(user.role)">
                {{ getRoleDisplayName(user.role) }}
              </span>
            </td>
            <td class="px-6 py-5 text-gray-700">{{ user.site }}</td>
            <td class="px-6 py-5">
              <span [ngClass]="getStatusBadgeClass(user.status)">
                <i
                  class="w-2 h-2 rounded-full"
                  [ngClass]="user.status === 'active' ? 'bg-emerald-600' : 'bg-red-600'"
                ></i>
                {{ user.status | titlecase }}
              </span>
            </td>
            <td class="px-6 py-5 text-gray-700">{{ user.lastActive }}</td>
            <td class="px-6 py-5">
              <div class="flex gap-2">
                <button
                  (click)="editUser(user)"
                  title="Edit"
                  class="w-9 h-9 rounded-lg flex items-center justify-center bg-emerald-50 text-emerald-600 hover:bg-emerald-600 hover:text-white hover:scale-110 transition-all duration-300"
                >
                  <i class="fas fa-edit"></i>
                </button>
                <button
                  (click)="managePermissions(user)"
                  title="Permissions"
                  class="w-9 h-9 rounded-lg flex items-center justify-center bg-emerald-50 text-emerald-600 hover:bg-emerald-600 hover:text-white hover:scale-110 transition-all duration-300"
                >
                  <i class="fas fa-key"></i>
                </button>
                <button
                  (click)="deleteUser(user)"
                  title="Delete"
                  class="w-9 h-9 rounded-lg flex items-center justify-center bg-red-50 text-red-600 hover:bg-red-600 hover:text-white hover:scale-110 transition-all duration-300"
                >
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
